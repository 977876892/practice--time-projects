<!-- header message start-->
<div class="dialog-header p-2" *ngIf="tab !== 'mail-template'">
  <!-- <i class="fas fa-plus"> </i> -->
  <span class="dialog-header-txt"> {{tab=='remarkView'?'Previous remark/comment':dialogMessage}} </span>
  <i class="dialog-closex fas fa-times"  (click)="MatDialogRef.close()" *ngIf="common.internetConn && tab!=='attachView' && tab!=='remarkView'"> </i>
</div>
<!-- header message end-->

<!-- confirm message start-->
<span *ngIf="tab !== 'LotView' && tab !== 'aucView'  && tab !== 'mail-template'">
  <div class="dialog-content p-3" id="printPreview">

    <!-- buyer bidding page dynamic-header filter start -->
    <div *ngIf="tab === 'dynamicMenu'">
      <app-filter-column></app-filter-column> 
    </div>
    <!-- buyer bidding page dynamic-header filter end -->

    <!-- normal confirm message start-->
    <div *ngIf="tab === 'confirm_msg'" [innerHTML]="dialogContent"></div>
    <div *ngIf="tab === 'offline'">
      <span style="color:red;" *ngIf="!common.internetConn">You
        are Offline! Your Internet connection is disconnected.</span>
      <span style="color:green;" *ngIf="common.internetConn">Your Internet is connected successfully.</span>
    </div>
    <!-- normal confirm message end-->
    <div *ngIf="tab === 'excel-item-template'">
      {{dialogContent}}
    </div>
    <!-- attachment error confirm message start-->
    <div *ngIf="tab === 'attachmentError_confirm_msg'">
      <div *ngIf="dialogContent && dialogContent.samesize && dialogContent.samesize.length>0">
        <p class="redfont">{{commonheader.LARGE_FILE}}</p>
        <ol>
          <li *ngFor="let file of dialogContent.samesize">{{file}}</li>
        </ol>
      </div>
      <div *ngIf="dialogContent && dialogContent.samefile && dialogContent.samefile.length>0">
        <p class="redfont">{{commonheader.FILE_ALR_EXI}}</p>
        <ol>
          <li *ngFor="let file of dialogContent.samefile">{{file}}</li>
        </ol>
      </div>
      <div *ngIf="dialogContent && dialogContent.invalidFile && dialogContent.invalidFile.length>0">
        <p class="redfont">{{commonheader.INV_FILE}}</p>
        <ol>
          <li *ngFor="let file of dialogContent.invalidFile">{{file}}</li>
        </ol>
      </div>
    </div>
    <!-- attachment error confirm message end-->
    <div *ngIf="tab === 'bidView'|| tab==='bidAll'">
      <app-bidview-popup [tab]="tab" [supplierData]="supplierData" [dialogData]="itemData" (enableConfirm)="enableConfirm($event);"
        [auctionData]="auctionData" [aucSubmit]="aucSubmit"></app-bidview-popup>
    </div>
    <div *ngIf="tab === 'preBidView'">
      <app-preliminarybids [auctionData]="dialogContent.auctionData" [displaySupplier]="dialogContent.supplier"
        [preBid]="dialogContent.preBid" [treeData]="lot_item" [supplierUser]="supplier.supplierUser" [auctionID]="auctionId">
      </app-preliminarybids>
    </div>
    <div *ngIf="tab === 'Print-Preview'">
      <app-printpreview [viewData]="viewData"> </app-printpreview>
    </div>
    <div *ngIf="tab === 'pohistory'">
      <app-po-history  (selectedReport)="getSelectedPoHistory($event)" [itemCode]="viewData"> </app-po-history>
    </div>
    <div *ngIf="tab === 'audit-log'">
      <app-audit-log [auctionID]="auctionId"> </app-audit-log>
    </div>
    <div *ngIf="tab === 'template-confirm'">
      <mat-form-field class="full-width">
        <mat-label>Auction Name</mat-label>
        <input matInput [(ngModel)]="templateAuctionNmae" required>
      </mat-form-field>
    </div>
    <div *ngIf="tab === 'acceptView'">
      <div *ngIf="allRemarks.length>0" class="row">
        <div class="col-md-12 clearfix" style="max-height: 300px; overflow: auto; ">
          <app-remark [allRemarks]="allRemarks" [supplier]="true"> 
          </app-remark>
        </div>
      </div>
      <div class="row ">
        <div class="col-md-12 mt-3">
          <mat-form-field class="full-width">
            <mat-label>Comment</mat-label>
            <input matInput [(ngModel)]="comment" required>
            <!-- <span *ngIf="allRemarks.length>0" matSuffix matTooltip="Previous remark/comment"><i class="fas fa-eye" (click)="openRemark();"  style="cursor: pointer; color: #3f51b5;"></i></span> -->
            </mat-form-field>
        </div>
      </div>
      <div class="row" *ngIf="auctionData.currency.length>1">
        <div class="col-md-3">
          <mat-form-field class="full-width">
            <mat-label>Addition Factor</mat-label>
            <input matInput [(ngModel)]="supplier.supplierAF" disabled>
            <span matSuffix>{{auctionData.primaryCurrency}}</span>
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <mat-form-field class="full-width">
            <mat-label>Multiplication Factor</mat-label>
            <input matInput [(ngModel)]="supplier.supplierMF" disabled>
            <span matSuffix>%</span>
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <mat-form-field class="full-width">
            <mat-label>Currency</mat-label>
            <mat-select disableOptionCentering [(ngModel)]="selectBidCurrency" (selectionChange)="changeCurrency();">
              <mat-option *ngFor="let bidding of auctionData.currency" [value]="bidding">
                {{bidding.currencyName}}({{bidding.currencyCode}})
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <mat-form-field class="full-width">
            <mat-label>Exchange Rate</mat-label>
            <input matInput [(ngModel)]="selectBidCurrency.exchangeRate" disabled>
            <span matSuffix>{{selectBidCurrency.currencyCode}}</span>
          </mat-form-field>
        </div>
      </div>
      <div class="row" *ngIf="prelimianryData.length>0">
        <div class="col-md-12">
          <app-preliminarybids [supplierUser]="supplier.supplierUser" [auctionID]="auctionId" [auctionData]="auctionData"
            [displaySupplier]="supplier" [preBid]="prelimianryData" [treeData]="lot_item"> </app-preliminarybids>
        </div>
      </div>
    </div>
    <div *ngIf="tab === 'downloadView'">
      <table mat-table [dataSource]="downloadSource" class="mat-elevation-z8">

        <ng-container matColumnDef="document">
          <th mat-header-cell *matHeaderCellDef> Document </th>
          <td mat-cell *matCellDef="let element"> {{element?.docDesc}} </td>
        </ng-container>

        <ng-container matColumnDef="download">
          <th mat-header-cell *matHeaderCellDef> Download </th>
          <td mat-cell *matCellDef="let element">
            <a [href]="common.downloadAttachmentData(element)" download>{{element.fileName}}</a>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsDownloads"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsDownloads;"></tr>
      </table>
    </div>
    <div *ngIf="tab === 'attachView'">
      <div class="border-card border-blue mb-3" *ngFor="let doc of attachData;let i=index;">
        <div class=" d-flex justify-content-between align-items-center px-3 py-2 ">
          <div class="font13">
            <div class="bold"> {{commonheader.ATTACH_DOC.DOC_NAME}}</div>
            <div class="bluefont text-dotdot">
              <a [href]="common.downloadAttachmentData(doc)" download>{{doc.fileName}}</a>
            </div>
          </div>
         
        </div>
        <div class=" d-flex justify-content-between align-items-center px-3 py-2 graybg">
          <div class="font13">
            <mat-form-field class="full-width">
              <mat-label>{{commonheader.ATTACH_DOC.ATTACH_TY}}</mat-label>
              <mat-select [(ngModel)]="doc.docDesc" disabled>
                <mat-option *ngFor="let item of attachment_type_options" [value]="item.value">
                  {{item.value}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div>
    
          </div>
          <div>
            <div class="vertical-line align-self-stretch darkgraybg mx-2"></div>
            <div class="del-size">
              <mat-slide-toggle [(ngModel)]="doc.isExternal" [checked]="doc.isExternal" disabled></mat-slide-toggle>
              <!-- <div class="font13" *ngIf="doc.isExternal">
                <mat-checkbox [(ngModel)]="doc.forMailing" disabled>
                  {{commonheader.ATTACH_DOC.EXTERNAL}} </mat-checkbox>
              </div> -->
              <div class="font13" *ngIf="doc.isExternal">
                {{commonheader.ATTACH_DOC.EXTERNAL}} </div>
              <div class="font13" *ngIf="!doc.isExternal"> {{commonheader.ATTACH_DOC.INTERNAL}} </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="tab === 'mailAttachSizeExceeded'">
        <div *ngIf="dialogContent">
          <p class="redfont">{{dialogContent}}</p>
        </div>
    </div>
    <!-- <div *ngIf="tab === 'remarkView'" >
      <app-remark [allRemarks]="allRemarks">
      </app-remark>
    </div> -->
  </div>
  <div class="dialog-footer" *ngIf="common.internetConn">
    <div class="col-md-12 mb-2 mt-2 text-right">
      <button mat-flat-button class="mr-2 btn-blue" [disabled]="!enableButton || auctionReadOnly" *ngIf="tab !== 'dynamicMenu' || tab !== 'attachView' " (click)="onPositiveBtn(dialogContent)">
        {{tab==='remarkView'?'Back to invitation':dialogPositiveBtn}}
      </button>
      <button mat-flat-button class="mr-2" color="warn" type="button" *ngIf="tab === 'acceptView' && tab !== 'attachView'" (click)="onDeclineBtn()">
        Decline
      </button>
      <button [disabled]="auctionReadOnly" mat-flat-button class="mr-2" color="warn" type="button" *ngIf="tab === 'preBidView'" (click)="onDeleteBid()">
        Delete All Bid
      </button>
      <button mat-flat-button color="warn" type="button" (click)="onNegativeBtn()" *ngIf="dialogNegativeBtn && tab!=='remarkView'">
        {{dialogNegativeBtn}}
      </button>
    </div>
  </div>
</span>
<!-- confirm message end-->

<span *ngIf="tab === 'LotView'">
  <app-lot-popup-view-only [viewData]="viewData"></app-lot-popup-view-only>
</span>
<span *ngIf="tab === 'aucView'">
  <app-basicinfo-popup [auctionId]="auctionId" (openAttach)="getAttachment($event);" [biddings]="biddingcurrency"> </app-basicinfo-popup>
</span>
<span *ngIf="tab === 'mail-template'">
  <app-mail-template [auctionId]="viewData?.auctionId" [popupFlag]="true" [MatDialogRef]="MatDialogRef" [supplier]="viewData?.supplier">
  </app-mail-template>
</span>